package leetcode;

import java.util.Stack;

public class l42v1 {
    //äºŒåˆ·è‡ªå·±å†™ä¸€éå’¯
    public int trap(int[] height) {

        //å•è°ƒæ ˆ   æ¨ªç€æ±‚çš„
        Stack<Integer> stack = new Stack<>();

        int res = 0;
        //æ ˆé‡Œåªèƒ½æ”¾é€’å‡çš„æ•°<==è¿™äº›æ•°æ˜¯ç­‰ç€æ¥é›¨æ°´çš„,æ˜¯ç¢—çš„åŠè¾¹å•Š!
        for (int i = 0; i < height.length; i++) {

            //å¦‚æœå‡ºç°æˆ‘ç°åœ¨æ‰‹ä¸Šçš„height[i]æ¯”æ ˆé¦–çš„å¤§!è¿™ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å•Š?å¯ä»¥æ¥åˆ°é›¨æ°´äº†!
            // (æ ˆé‡Œæ˜¯è¶Šå¾€æ·±å¤„è¶Šé«˜,æˆ‘ç°åœ¨æ‰‹ä¸Šè¿™ä¸ªä¹Ÿé«˜,é‚£ä¹ˆä¸å°±é«˜ä½é«˜äº†?ä¸å°±å¯æ¥é›¨æ°´äº†?
            // =====èƒ½æ¥åˆ°å¤šå°‘é›¨æ°´?
            while (!stack.isEmpty()&&height[stack.peek()]<height[i]){

                int di = height[stack.pop()];
                //å¦‚æœåé¢è¿˜æœ‰æ·±çš„,å°±ç»§ç»­. å¦‚æœåé¢æ²¡æœ‰å°±ç®—äº†,å°±æŠŠè¿™ä¸ªå°çš„diç»™æ‰”æ‰(å·¦ä¾§éƒ½æ²¡äº†,æœ‰é›¨ä¹Ÿæ¼äº†..)
                if(!stack.isEmpty()){            //å¦‚æœè¿˜æœ‰,å› ä¸ºæ˜¯å•è°ƒæ ˆ--è‚¯å®šæ˜¯æ¯”è¿™ä¸ªdiå¤§çš„
                    int high = Math.min(height[stack.peek()],height[i])-di;
                    int chang = i-stack.peek()-1;                             /*[æ˜“é”™]:è¿™é‡Œæœ‰ä¸ª-1åˆ«æ¼äº†*/
                    System.out.println("chang = "+chang+"high = "+high  );
                    res = res+high*chang;
                }

            }
            //ğŸ‘‡å®é™…ä¸Šè¿™é‡Œè‚¯å®šæ»¡è¶³è¿™ä¸ªäº†,æ‰€ä»¥ä¸ç”¨ifäº†  <==è¿™åœ°æ–¹å…¶å®éƒ½è¦æ¨è¿›æ ˆé‡Œ,æ— è®ºèµ°ä¸èµ°ä¸Šé¢çš„while ()~
            //if(stack.isEmpty()||height[stack.peek()]>=height[i]){
            stack.push(i);      //[é‡éš¾ç‚¹]:æŠŠè°æ¨è¿›å»?æŠŠä¸‹æ ‡æ¨è¿›å»!ä¸æ˜¯æŠŠå€¼æ¨è¿›å»-----æœ‰ä»€ä¹ˆå¥½å¤„?ç®—è·ç¦»çš„æ—¶å€™æœ‰ä¸‹ä¸‹æ ‡,æ¯”æ•°å€¼çš„æ—¶å€™å¯ä»¥è¿›æ•°ç»„
            //}
        }
        return res;
    }
}
